
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' stroke='%23d946ef' d='M16 4 L28 10 L28 22 L16 28 L4 22 L4 10 Z' fill='none'/%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' stroke='%2306b6d4' d='M16 12 L22 15 L22 21 L16 24 L10 21 L10 15 Z' fill='none'/%3E%3Ccircle r='2' cy='18' cx='16' fill='%2306b6d4'/%3E%3C/svg%3E" type="image/svg+xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cyberpunk Daily Mission Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Share Tech Mono', monospace;
        background-color: #01020d;
        overflow: hidden;
      }
      #particle-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
      }
      #root {
        position: relative;
        z-index: 1;
      }
      .font-orbitron {
        font-family: 'Orbitron', sans-serif;
      }
      .text-glow {
        text-shadow: 0 0 5px currentColor, 0 0 10px currentColor;
      }
      
      .main-panel-container {
        position: relative;
        padding: 2px;
        background: linear-gradient(rgba(6, 182, 212, 0.4), rgba(1, 2, 13, 0.6)), linear-gradient(rgba(217, 70, 239, 0.4), rgba(1, 2, 13, 0.6));
        box-shadow: 0 0 15px rgba(6, 182, 212, 0.3), 0 0 25px rgba(217, 70, 239, 0.3);
        clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
      }

      .animate-flicker {
        animation: flicker 2s linear infinite;
      }
      .task-item-enter {
        opacity: 0;
        transform: translateY(20px);
      }
      .task-item-enter-active {
        opacity: 1;
        transform: translateY(0);
        transition: opacity 300ms ease-out, transform 300ms ease-out;
      }
      .details-enter {
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        transition: max-height 300ms ease-in-out, opacity 300ms ease-in-out;
      }
      .details-enter-active {
        max-height: 100px;
        opacity: 1;
      }
      .task-item-completing {
        animation: complete-and-fade 800ms forwards ease-out;
      }
      @keyframes complete-and-fade {
        0% {
          opacity: 1;
          transform: scale(1.05);
          background-color: rgba(45, 212, 191, 0.3);
        }
        20% {
          opacity: 1;
          transform: scale(1);
          background-color: transparent;
        }
        50% {
          opacity: 0.8;
          transform: translateX(10px) skewX(-10deg);
        }
        80% {
          opacity: 0.5;
          transform: translateX(-10px) skewX(10deg);
        }
        100% {
          opacity: 0;
          transform: scale(0.5) translateX(0) skewX(0);
          filter: blur(10px);
        }
      }

      @keyframes flicker {
        0%, 100% { opacity: 1; text-shadow: 0 0 2px currentColor; }
        50% { opacity: 0.7; text-shadow: 0 0 5px currentColor; }
      }
      
      .crt-lines::before {
        content: " ";
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
        z-index: 2;
        background-size: 100% 2px, 3px 100%;
        pointer-events: none;
      }
      @keyframes pulsate-glow {
        0%, 100% { text-shadow: 0 0 5px currentColor, 0 0 10px currentColor; }
        50% { text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor; }
      }
      .animate-pulsate-glow {
        animation: pulsate-glow 1.5s ease-in-out infinite;
      }
      .task-item-hover-glow-high:hover {
        box-shadow: 0 0 7px 1px #d946ef, 0 0 15px 2px rgba(217, 70, 239, 0.6);
        border-color: #f0abfc;
        background-color: rgba(217, 70, 239, 0.1);
      }
      .task-item-hover-glow-medium:hover {
        box-shadow: 0 0 7px 1px #eab308, 0 0 15px 2px rgba(234, 179, 8, 0.6);
        border-color: #fde047;
        background-color: rgba(234, 179, 8, 0.1);
      }
      .task-item-hover-glow-low:hover {
        box-shadow: 0 0 7px 1px #06b6d4, 0 0 15px 2px rgba(6, 182, 212, 0.6);
        border-color: #67e8f9;
        background-color: rgba(6, 182, 212, 0.1);
      }

      @keyframes flash-high {
        50% { 
          transform: scale(1.02);
          box-shadow: inset 0 0 12px 2px rgba(217, 70, 239, 0.5);
          border-radius: 1rem;
        }
      }
      .task-item-flashing-high { animation: flash-high 0.8s ease-in-out; }

      @keyframes flash-medium {
        50% { 
          transform: scale(1.02);
          box-shadow: inset 0 0 12px 2px rgba(234, 179, 8, 0.5);
          border-radius: 1rem;
        }
      }
      .task-item-flashing-medium { animation: flash-medium 0.8s ease-in-out; }

      @keyframes flash-low {
        50% {
          transform: scale(1.02);
          box-shadow: inset 0 0 12px 2px rgba(6, 182, 212, 0.5);
          border-radius: 1rem;
        }
      }
      .task-item-flashing-low { animation: flash-low 0.8s ease-in-out; }
      
      .header-title-container {
        display: flex;
        align-items: center;
        gap: 1rem;
      }
      .header-bracket {
        display: inline-block;
        color: #06b6d4;
        text-shadow: 0 0 4px #06b6d4;
        font-weight: bold;
        font-size: 1.875rem; /* 3xl */
        line-height: 2.25rem;
      }
      
      @keyframes fadeInOut {
        0%, 100% { opacity: 0; transform: scale(0.8) translateY(50px); }
        10%, 90% { opacity: 1; transform: scale(1) translateY(0); }
      }
      .confirmation-fade {
        animation: fadeInOut 2s ease-in-out forwards;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client"
  }
}
</script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<link rel="stylesheet" href="/index.css">
</head>
  <body>
    <canvas id="particle-canvas"></canvas>
    <div id="root" class="crt-lines"></div>
    <script type="text/babel" data-type="module">
import React, { useState, useCallback, useEffect, useRef } from 'react';
import ReactDOM from 'react-dom/client';

// === components/Icons.jsx ===
const AddIcon = ({ className }) => (
  <svg className={className} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
    <path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2h6Z" />
  </svg>
);

const CheckIcon = ({ className }) => (
  <svg className={className} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
    <path d="M9.9997 15.1709_19.1921 5.97852_20.6063 7.39273_9.9997 18.0003_3.63574 11.6364_5.04996 10.2221z" />
  </svg>
);

// === components/SystemInfoPanel.jsx ===
const SystemInfoPanel = () => {
  const [time, setTime] = useState(new Date());

  useEffect(() => {
    const timerId = setInterval(() => setTime(new Date()), 1000);
    return () => clearInterval(timerId);
  }, []);

  const formatTime = (date) => {
    return date.toLocaleTimeString('en-US', { hour12: false });
  };
  
  const formatDate = (date) => {
    const year = date.getFullYear();
    const month = (date.getMonth() + 1).toString().padStart(2, '0');
    const day = date.getDate().toString().padStart(2, '0');
    return `${year}-${month}-${day}`;
  }
  
  const randomHex = (length) => {
    return Array.from({length}, () => Math.floor(Math.random() * 16).toString(16)).join('');
  }

  return (
    <div className="absolute top-4 right-4 text-xs text-cyan-400 p-4 border border-cyan-700/50 bg-black/30 backdrop-blur-sm hidden md:block w-64 shadow-lg shadow-cyan-500/10">
      <div className="flex justify-between items-center border-b border-cyan-700/50 pb-1 mb-2">
        <h3 className="font-bold text-glow">SYSTEM STATUS</h3>
        <div className="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
      </div>
      <p><span className="text-gray-500">SESSION TIME:</span> {formatTime(time)}</p>
      <p><span className="text-gray-500">SYSTEM DATE:</span> {formatDate(time)}</p>
      <p><span className="text-gray-500">CONNECTION:</span> <span className="text-green-400">SECURE</span></p>
      <p><span className="text-gray-500">UPLINK ID:</span> {randomHex(8).toUpperCase()}</p>
      <div className="mt-2 pt-2 border-t border-cyan-700/50">
        <p>CORE TEMP: <span className="text-fuchsia-400">45.2Â°C</span></p>
        <div className="w-full bg-gray-700/50 h-2 mt-1 border border-cyan-900">
            <div className="bg-fuchsia-500 h-full" style={{width: '45.2%'}}></div>
        </div>
      </div>
      <div className="mt-2">
        <p>MEMORY USAGE: <span className="text-yellow-400">67.8%</span></p>
        <div className="w-full bg-gray-700/50 h-2 mt-1 border border-cyan-900">
            <div className="bg-yellow-500 h-full" style={{width: '67.8%'}}></div>
        </div>
      </div>
      <p className="mt-2 text-cyan-600 animate-flicker">_//: ALL SYSTEMS NOMINAL</p>
    </div>
  );
};

// === components/TaskItem.jsx ===
const TaskItem = ({ task, onComplete, onRemove, isFlashing }) => {
  const [isExiting, setIsExiting] = useState(false);
  const [isEntering, setIsEntering] = useState(true);
  const [showDetails, setShowDetails] = useState(false);

  useEffect(() => {
    const timer = setTimeout(() => setIsEntering(false), 10);
    return () => clearTimeout(timer);
  }, []);
  
  useEffect(() => {
    if (task.isCompleting && !isExiting) {
      setIsExiting(true);
      setTimeout(() => {
        onRemove(task.id);
      }, 800); // Match exit animation duration
    }
  }, [task.isCompleting, onRemove, task.id, isExiting]);
  
  const priorityConfig = {
    High: {
      hoverGlow: 'task-item-hover-glow-high',
      labelColor: 'text-fuchsia-400',
      labelGlow: 'text-glow animate-pulsate-glow',
      textColor: 'text-fuchsia-300',
      buttonClasses: 'border-fuchsia-500 text-fuchsia-500 hover:bg-fuchsia-500',
      flashClass: 'task-item-flashing-high'
    },
    Medium: {
      hoverGlow: 'task-item-hover-glow-medium',
      labelColor: 'text-yellow-400',
      labelGlow: '',
      textColor: 'text-yellow-300',
      buttonClasses: 'border-yellow-500 text-yellow-500 hover:bg-yellow-500',
      flashClass: 'task-item-flashing-medium'
    },
    Low: {
      hoverGlow: 'task-item-hover-glow-low',
      labelColor: 'text-cyan-400',
      labelGlow: '',
      textColor: 'text-cyan-300',
      buttonClasses: 'border-cyan-500 text-cyan-500 hover:bg-cyan-500',
      flashClass: 'task-item-flashing-low'
    }
  };
  const config = priorityConfig[task.priority] || priorityConfig['Medium'];

  const baseClasses = 'p-2 my-1 border border-transparent transition-all duration-300 cursor-pointer relative overflow-hidden rounded-md';
  const stateClasses = isExiting 
    ? 'task-item-completing' 
    : (isEntering ? 'task-item-enter' : 'task-item-enter-active');
  const themeClasses = `bg-gray-900/50 ${config.hoverGlow}`;
  const flashingClass = isFlashing ? config.flashClass : '';

  return (
    <li 
      className={`${baseClasses} ${stateClasses} ${themeClasses} ${flashingClass}`} 
      onClick={() => setShowDetails(!showDetails)}
    >
      <div className="flex items-center justify-between">
        <span className={`flex-grow pr-4 ${config.textColor}`}>{task.text}</span>
        <div className="flex items-center flex-shrink-0 gap-4">
          <span className={`text-xs font-bold ${config.labelColor} ${config.labelGlow}`}>
            // {task.priority.toUpperCase()}
          </span>
          <button
            onClick={(e) => {
              e.stopPropagation();
              if (!task.isCompleting) {
                onComplete(task.id);
              }
            }}
            disabled={task.isCompleting}
            className={`w-8 h-8 flex items-center justify-center border-2 rounded-full hover:text-black transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-opacity-50 disabled:opacity-50 ${config.buttonClasses}`}
            aria-label={`Complete task: ${task.text}`}
          >
            <CheckIcon className="w-5 h-5" />
          </button>
        </div>
      </div>
      {showDetails && task.details && (
          <div className={`mt-2 pt-2 pl-4 border-t border-cyan-800/50 text-gray-400 text-sm whitespace-pre-wrap ${showDetails ? 'details-enter-active' : 'details-enter'}`}>
            {task.details}
          </div>
      )}
    </li>
  );
};


// === App.jsx ===
const App = () => {
  const [tasks, setTasks] = useState([
      { id: 1, text: "Connect to command console", details: "Check mission logs and familiarize with the UI.", priority: "High", isCompleting: false },
      { id: 2, text: "Add new mission targets", details: "Use the input fields below to add new tasks to the list.", priority: "Medium", isCompleting: false },
      { id: 3, text: "Neutralize a target", details: "Click the checkmark button to complete a task.", priority: "Low", isCompleting: false },
  ]);
  const [newTask, setNewTask] = useState('');
  const [newTaskDetails, setNewTaskDetails] = useState('');
  const [newPriority, setNewPriority] = useState('Medium');
  const [showBriefing, setShowBriefing] = useState(false);
  const [flashingTaskIndex, setFlashingTaskIndex] = useState(0);
  const [confirmationMessage, setConfirmationMessage] = useState('');

  const confirmationMessages = [
    'TARGET NEUTRALIZED',
    'OBJECTIVE COMPLETE',
    'THREAT ELIMINATED',
    'SYSTEM ACKNOWLEDGED'
  ];

  useEffect(() => {
    const canvas = document.getElementById('particle-canvas');
    const ctx = canvas.getContext('2d');

    const setCanvasDimensions = () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    };
    setCanvasDimensions();
    
    const symbols = '!@#$%^&*()_+-=[]{}|;:\'",./<>?';
    const nums = '0123456789';
    const characters = symbols + nums;

    const fontSize = 16;
    let columns = Math.floor(canvas.width / fontSize);

    const drops = [];
    for (let x = 0; x < columns; x++) {
        drops[x] = 1;
    }

    const draw = () => {
        ctx.fillStyle = 'rgba(1, 2, 13, 0.05)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = '#0f0'; // Green text
        ctx.font = `${fontSize}px monospace`;

        for (let i = 0; i < drops.length; i++) {
            const text = characters.charAt(Math.floor(Math.random() * characters.length));
            ctx.fillText(text, i * fontSize, drops[i] * fontSize);

            if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                drops[i] = 0;
            }
            drops[i]++;
        }
    };

    let intervalId = setInterval(draw, 33);

    const handleResize = () => {
        clearInterval(intervalId);
        setCanvasDimensions();
        columns = Math.floor(window.innerWidth / fontSize);
        drops.length = 0;
        for (let x = 0; x < columns; x++) {
            drops[x] = 1;
        }
        intervalId = setInterval(draw, 33);
    };

    window.addEventListener('resize', handleResize);

    return () => {
        window.removeEventListener('resize', handleResize);
        clearInterval(intervalId);
    };
  }, []);

  useEffect(() => {
    const activeTasks = tasks.filter(t => !t.isCompleting);
    if (activeTasks.length === 0) {
      setFlashingTaskIndex(-1);
      return;
    };

    const intervalId = setInterval(() => {
      setFlashingTaskIndex(prevIndex => (prevIndex + 1) % activeTasks.length);
    }, 800); 

    return () => clearInterval(intervalId);
  }, [tasks]);


  const priorityOrder = { 'High': 3, 'Medium': 2, 'Low': 1 };
  
  const sortTasks = (tasksArray) => {
    return [...tasksArray].sort((a, b) => (priorityOrder[b.priority] || 0) - (priorityOrder[a.priority] || 0));
  };

  useEffect(() => {
    setTasks(prevTasks => sortTasks(prevTasks));
  }, []);

  const handleAddTask = (e) => {
    e.preventDefault();
    if (newTask.trim() === '') return;
    const taskToAdd = {
      id: Date.now().toString(36) + Math.random().toString(36).substring(2),
      text: newTask.trim(),
      details: newTaskDetails.trim(),
      priority: newPriority,
      isCompleting: false,
    };
    setTasks(prevTasks => sortTasks([...prevTasks, taskToAdd]));
    setNewTask('');
    setNewTaskDetails('');
    setShowBriefing(false);
  };

  const handleCompleteTask = (id) => {
    setTasks(prevTasks =>
      prevTasks.map(task =>
        task.id === id ? { ...task, isCompleting: true } : task
      )
    );
    const randomMsg = confirmationMessages[Math.floor(Math.random() * confirmationMessages.length)];
    setConfirmationMessage(randomMsg);
    setTimeout(() => {
        setConfirmationMessage('');
    }, 2000);
  };

  const handleRemoveTask = (id) => {
     setTasks(prevTasks => prevTasks.filter(task => task.id !== id));
  };
  
  const priorities = ['Low', 'Medium', 'High'];
  const priorityButtonConfig = {
      High: { bg: 'bg-fuchsia-500', border: 'border-fuchsia-500', text: 'text-black' },
      Medium: { bg: 'bg-yellow-500', border: 'border-yellow-500', text: 'text-black' },
      Low: { bg: 'bg-cyan-500', border: 'border-cyan-500', text: 'text-black' }
  };

  const activeTasks = tasks.filter(t => !t.isCompleting);

  return (
    <>
      <SystemInfoPanel />
      <main className="min-h-screen flex flex-col items-center justify-center text-cyan-300 p-4 sm:p-6 md:p-8">
        
        {confirmationMessage && (
          <div className="fixed inset-0 flex items-center justify-center bg-black/50 z-50 pointer-events-none confirmation-fade px-4 text-center">
            <h2 className="text-3xl md:text-5xl font-orbitron text-green-400 text-glow tracking-widest">{confirmationMessage}</h2>
          </div>
        )}

        <div className="w-full max-w-2xl z-10 main-panel-container">
          <div className="bg-[#01020d]/80 backdrop-blur-xl h-[90vh] min-h-[600px] flex flex-col p-4">
              <header className="w-full text-center pb-2">
                  <div className="header-title-container">
                      <span className="header-bracket">[</span>
                      <h1 className="text-2xl md:text-4xl font-bold font-orbitron text-glow text-cyan-300 animate-flicker flex-shrink-0 px-2">
                        DAILY MISSION LOG
                      </h1>
                      <span className="header-bracket">]</span>
                  </div>
                  <p className="text-fuchsia-400 mt-2 animate-flicker text-sm">// STATUS: {activeTasks.length} TARGETS ACTIVE</p>
              </header>

              <div className="flex-grow my-4 overflow-y-auto pr-2 border-t-2 border-b-2 border-cyan-800/50 py-2">
                  {tasks.length > 0 ? (
                    <ul>
                      {tasks.map((task, index) => {
                          const activeTaskIndex = activeTasks.findIndex(t => t.id === task.id);
                        return (
                          <TaskItem 
                            key={task.id} 
                            task={task} 
                            onComplete={handleCompleteTask} 
                            onRemove={handleRemoveTask} 
                            isFlashing={activeTaskIndex === flashingTaskIndex}
                          />
                        )
                      })}
                    </ul>
                  ) : (
                      <div className="flex flex-col justify-center items-center h-full text-center">
                          <h2 className="text-3xl font-orbitron text-green-400 text-glow">MISSION COMPLETE</h2>
                          <p className="text-gray-400 mt-2">Awaiting new directives.</p>
                      </div>
                  )}
              </div>


              <footer className="w-full pt-2">
                <form onSubmit={handleAddTask}>
                    <div className="flex justify-center gap-2 md:gap-3 mb-3">
                    {priorities.map(p => {
                      const config = priorityButtonConfig[p];
                      const isSelected = newPriority === p;
                      return (
                          <button
                              key={p}
                              type="button"
                              onClick={() => setNewPriority(p)}
                              className={`px-2 py-0.5 text-xs border rounded-sm transition-all duration-300 font-bold ${
                                  isSelected
                                  ? `${config.bg} ${config.border} ${config.text}`
                                  : 'bg-transparent border-gray-600 text-gray-400 hover:border-fuchsia-400 hover:text-fuchsia-400'
                              }`}
                          >
                          {p.toUpperCase()}
                          </button>
                      )
                    })}
                  </div>
                    <div className="flex gap-2 items-center">
                    <input
                        type="text"
                        value={newTask}
                        onChange={(e) => setNewTask(e.target.value)}
                        placeholder=">> Add new target..."
                        className="w-full flex-grow bg-gray-900/70 border border-fuchsia-500/50 text-fuchsia-300 px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-fuchsia-400 focus:border-transparent transition-all"
                    />
                    <button type="button" onClick={() => setShowBriefing(!showBriefing)} className="px-3 py-1.5 flex-shrink-0 text-xs border-2 border-cyan-700 text-cyan-400 hover:bg-cyan-700/50 transition-all">
                      BRIEFING
                    </button>
                    <button
                      type="submit"
                      className="w-9 h-9 flex-shrink-0 flex items-center justify-center bg-cyan-500/20 border-2 border-cyan-500 text-cyan-300 hover:bg-cyan-500 hover:text-black transition-all duration-300 disabled:opacity-50"
                      disabled={!newTask.trim()}
                      aria-label="Add new target"
                    >
                      <AddIcon className="w-6 h-6"/>
                    </button>
                  </div>
                  <div className={showBriefing ? 'details-enter-active' : 'details-enter'}>
                    <textarea
                        value={newTaskDetails}
                        onChange={(e) => setNewTaskDetails(e.target.value)}
                        placeholder=">> Add mission briefing (optional)..."
                        className="w-full bg-gray-900/70 border border-fuchsia-500/50 text-gray-400 px-3 py-1.5 mt-2 focus:outline-none focus:ring-2 focus:ring-fuchsia-400 focus:border-transparent transition-all h-16 resize-none text-sm"
                        rows="2"
                    ></textarea>
                  </div>
                </form>
              </footer>
          </div>
        </div>
      </main>
    </>
  );
};

// === Render logic ===
const rootElement = document.getElementById('root');
const root = ReactDOM.createRoot(rootElement);
root.render(<App />);
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>
```